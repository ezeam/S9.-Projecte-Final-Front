<div class="card container-fluid col-8 col-md-7 col-lg-5 col-xl-4 col-xxl-3 mt-5 mb-5">
  <form [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="mb-3">
      <span class="d-flex justify-content-center mb-1">
        <label htmlFor="inputNombre" class="form-label mt-4">Nome</label>
      </span>
      <input
        type="text"
        class="form-control"
        id="inputNombre"
        formControlName="name"
        [ngClass]="{
          'is-invalid':
            registerForm.get('name')?.invalid &&
            registerForm.get('name')?.touched
        }"
      />
      @if(registerForm.get('name')?.invalid &&
      registerForm.get('name')?.touched) {
      <div class="text-danger">
        @if(registerForm.get('name')?.errors?.['required']) { Il nome è obbligatorio } 
        @if(registerForm.get('name')?.errors?.['minlength']) { Il nome deve essere lungo almeno 3 caratteri }
        @if(registerForm.get('name')?.errors?.['pattern']) { Sono ammesse solo lettere}
      </div>
      }
    </div>
    <div class="mb-3">
      <span class="d-flex justify-content-center mb-1">
        <label htmlFor="inputApellidos" class="form-label">Cognome</label>
      </span>
      <input
        type="text"
        class="form-control"
        id="inputApellidos"
        formControlName="surname"
        [ngClass]="{
          'is-invalid':
            registerForm.get('surname')?.invalid &&
            registerForm.get('surname')?.touched
        }"
      />
      @if(registerForm.get('surname')?.invalid &&
      registerForm.get('surname')?.touched) {
      <div class="text-danger">
        @if(registerForm.get('surname')?.errors?.['required']) { Il cognome è obbligatorio } 
        @if(registerForm.get('surname')?.errors?.['minlength']) { Il cognome deve essere lungo almeno 3 caratteri }
        @if(registerForm.get('surname')?.errors?.['pattern']) { Sono ammesse solo lettere }
      </div>
      }
    </div>
    <div class="mb-3">
      <span class="d-flex justify-content-center mb-1">
        <label htmlFor="inputNombre" class="form-label mt-4">Carta d'Identità</label>
      </span>
      <input
        type="text"
        class="form-control"
        id="inputDNI"
        formControlName="dni"
        [ngClass]="{
          'is-invalid':
            registerForm.get('dni')?.invalid &&
            registerForm.get('dni')?.touched
        }"
      />
      @if(registerForm.get('dni')?.invalid &&
      registerForm.get('dni')?.touched) {
      <div class="text-danger">
        @if(registerForm.get('dni')?.errors?.['required']) { La carta d'identità è obbligatoria } 
        @if(registerForm.get('dni')?.errors?.['minlength']) { La carta d'identit'a deve avere al meno 8 caratteri }
      </div>
      }
    </div>
    <div class="mb-3">
      <span class="d-flex justify-content-center mb-1">
        <label htmlFor="inputIndirizzo" class="form-label mt-4">Indirizzo</label>
      </span>
      <input
        type="text"
        class="form-control"
        id="inputIndirizzo"
        formControlName="address"
        [ngClass]="{
          'is-invalid':
            registerForm.get('Indirizzo')?.invalid &&
            registerForm.get('Indirizzo')?.touched
        }"
      />
      @if(registerForm.get('Indirizzo')?.invalid &&
      registerForm.get('Indirizzo')?.touched) {
      <div class="text-danger">
        @if(registerForm.get('Indirizzo')?.errors?.['required']) { L'indirizzo è obbligatorio }
      </div>
      }
    </div>
    <div class="mb-3">
      <span class="d-flex justify-content-center mb-1">
        <label htmlFor="inputEmail" class="form-label">Email</label>
      </span>
      <input
        type="email"
        class="form-control"
        id="inputEmail"
        formControlName="email"
        [ngClass]="{
          'is-invalid':
            registerForm.get('email')?.invalid &&
            registerForm.get('email')?.touched
        }"
      />
      @if(registerForm.get('email')?.invalid &&
      registerForm.get('email')?.touched) {
      <div class="text-danger">
        @if(registerForm.get('email')?.errors?.['required']) { L'email è obbligatoria } 
        @if(registerForm.get('email')?.errors?.['email']) { L'email deve avere una struttura corretta }
      </div>
      }
    </div>
    <div class="mb-3">
      <span class="d-flex justify-content-center mb-1">
        <label htmlFor="inputPassword" class="form-label">Password</label>
      </span>
      <input
        type="password"
        class="form-control"
        id="inputPassword"
        formControlName="password"
        [ngClass]="{
          'is-invalid':
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
        }"
      />
      @if(registerForm.get('password')?.invalid &&
      registerForm.get('password')?.touched) {
      <div class="text-danger">
        @if(registerForm.get('password')?.errors?.['required']) { La password è obbligatoria }
        @if(registerForm.get('password')?.errors?.['minlength']) {Deve essere lunga almeno 3 caratteri }
        @if(registerForm.get('password')?.errors?.['pattern']) { Deve contenere almeno una lettera maiuscola e almeno 1 numero }
      </div>
      }
    </div>    
    <span class="d-flex justify-content-center mb-3">
      <button type="submit" class="btn btn-primary me-3 px-3 py-2 border-2 shadow-sm">Registrati</button>
    </span>
    @if(errorMessage){
      <span class="d-flex justify-content-center mb-1">
        <div class="text-danger">
          {{ errorMessage }}
        </div>
      </span>      
    }
  </form>
</div>
